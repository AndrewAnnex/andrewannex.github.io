<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.3.0"><meta name=author content="Andrew M. Annex"><meta name=description content="Today I have open-sourced ASAP-Stereo, which I developed to automate the Ames Stereo Pipeline and to make Digital Elevation Models (DEMs) of HiRISE and CTX stereo pairs reproducible for my research. Ames Stereo Pipeline (aka ASP) is an open-source stereo photogrammetry toolkit that helps users take stereo image pairs and produce DEMS from them using a command-line interface (CLI). However, the process involves a large number of steps that are tedious to run and can lead to mistakes or lost work."><link rel=alternate hreflang=en-us href=https://andrewannex.com/post/asapstereo/><meta name=theme-color content="hsl(27, 48%, 68%)"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.6.0/css/all.css integrity=sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css crossorigin=anonymous title=hl-light disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css crossorigin=anonymous title=hl-dark><link rel=stylesheet href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono"><link rel=stylesheet href=/css/academic.min.a2da4865615564aeadb4a89a86edddfb.css><link rel=stylesheet href=/css/academic.fa342957495a01caef8d0a0bb6f01857.css><link rel=manifest href=/site.webmanifest><link rel=icon type=image/png href=/img/icon.png><link rel=apple-touch-icon type=image/png href=/img/icon-192.png><link rel=canonical href=https://andrewannex.com/post/asapstereo/><meta property=twitter:card content=summary_large_image><meta property=twitter:site content=@AndrewAnnex><meta property=twitter:creator content=@AndrewAnnex><meta property=og:site_name content=※><meta property=og:url content=https://andrewannex.com/post/asapstereo/><meta property=og:title content="Open Sourcing ASAP-Stereo | ※"><meta property=og:description content="Today I have open-sourced ASAP-Stereo, which I developed to automate the Ames Stereo Pipeline and to make Digital Elevation Models (DEMs) of HiRISE and CTX stereo pairs reproducible for my research. Ames Stereo Pipeline (aka ASP) is an open-source stereo photogrammetry toolkit that helps users take stereo image pairs and produce DEMS from them using a command-line interface (CLI). However, the process involves a large number of steps that are tedious to run and can lead to mistakes or lost work."><meta property=og:image content=https://andrewannex.com/img/icon-512.png><meta property=og:locale content=en-us><meta property=article:published_time content=2020-06-18T00:00:00-04:00><meta property=article:modified_time content=2020-06-18T00:00:00-04:00><title>Open Sourcing ASAP-Stereo | ※</title></head><body id=top data-spy=scroll data-target=#TableOfContents data-offset=71 class=dark><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off role=textbox spellcheck=false type=search></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id=navbar-main><div class=container><a class=navbar-brand href=/><img src=/img/icon-192.png alt=※></a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/#about><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/#posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#publications><span>Publications</span></a></li><li class=nav-item><a class=nav-link href=/#experience><span>Employment</span></a></li><li class=nav-item><a class=nav-link href=/#contact><span>Contact</span></a></li></ul><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link js-search" href=#><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class="nav-link js-dark-toggle" href=#><i class="fas fa-moon" aria-hidden=true></i></a></li></ul></div></div></nav><article class=article itemscope itemtype=http://schema.org/Article><div class="article-container pt-3"><h1 itemprop=name>Open Sourcing ASAP-Stereo</h1><meta content="2020-06-18 00:00:00 -0400 -0400" itemprop=datePublished><meta content="2020-06-18 00:00:00 -0400 -0400" itemprop=dateModified><div class=article-metadata><span class=article-date><time>Jun 18, 2020</time></span>
<span class=middot-divider></span><span class=article-reading-time>3 min read</span></div></div><div class=article-container><div class=article-style itemprop=articleBody><p>Today I have open-sourced <a href=https://github.com/AndrewAnnex/asap_stereo target=_blank>ASAP-Stereo</a>, which I developed to automate the Ames Stereo Pipeline and to make Digital Elevation Models (DEMs) of HiRISE and CTX stereo pairs reproducible for my research. <a href=https://github.com/NeoGeographyToolkit/StereoPipeline target=_blank>Ames Stereo Pipeline</a> (aka ASP) is an open-source stereo photogrammetry toolkit that helps users take stereo image pairs and produce DEMS from them using a command-line interface (CLI). However, the process involves a large number of steps that are tedious to run and can lead to mistakes or lost work. Automating the workflow to produce a DEM reduces the risk of human errors and also makes the results reproducible.</p><p>The <a href=https://github.com/USGS-Astrogeology/asp_scripts/ target=_blank>asp_scripts</a> project, written in pure bash, was the first open-sourced effort to automate the workflow of creating DEMs for CTX and HiRISE images, and ASAP-Stereo is an expansion and reimplementation of that project into python. By using python, ASAP-Stereo provides a more flexible version of the asp_scripts workflow. ASAP-Stereo implements the individual steps in the asp_scripts workflow as discrete functions to allow advanced users to fix issues as they occur without redoing work, while also providing higher-level functions that call the steps serially to reproduce the workflow.</p><p>The most exciting contributions of ASAP-Stereo are the Jupyter notebook based workflows to enable reproducibility. The notebook workflows contain all the logs for each step of the process, and the parameters used to create the DEM with embedded images of intermediate products. The notebook logs allow users to, at a glance, judge the outputs of ASP and make changes as needed or to distribute the full log in the supplementary material for a publication.</p><p>ASAP-Stereo is powered primarily by the <a href=https://github.com/amoffat/sh target=_blank>sh</a> package, which turns any program on the user&rsquo;s path into a python function, <a href=https://github.com/google/python-fire target=_blank>python fire</a>, which turns any python function or class into a CLI, and by the <a href=https://github.com/nteract/papermill target=_blank>papermill</a> project which turns Jupyter notebooks into runnable workflows. This mixing of python and bash allows ASAP-Stereo to mix the two with minimal scaffolding, gaining the benefits of both. For example, ASAP-Stereo uses GDAL programs to pass parameters to another CLI tool of mine called <a href=https://github.com/andrewannex/moody target=_blank>Moody</a> to use a REST API supported by the PDS Geosciences Node to download the subset of MOLA PEDR data needed to align the CTX dem to MOLA topography.</p><p>Other neat features include the incorporation of new feature-matching based point cloud alignment that makes the process of aligning HiRISE products to CTX a bit more robust and detecting the CPU cores and threads to speed up particular bottlenecks in the stereo process. ASAP-Stereo also uses other features in Moody to automatically determine the &ldquo;left image&rdquo; (most nadir) in a stereo run and the correct Ground Sample Distances (GSDs) to use.</p><p>That said, there are some things that ASAP-Stereo does not do. It does not make ASP accessible to beginners. ASAP-Stereo targets users who have advanced knowledge of ASP and ISIS3 due to sheer complexity and caveats involved. Deployment is difficult due to the complexity of ASP and ISIS3, which also prevents integration tests for the project. Planned changes for ISIS3 may enable this in the future.</p><p>By open-sourcing the project, I hope to see improvements to existing workflows as well as new workflows contributed by users. ASAP-Stereo provides an excellent framework to implement workflows for other instruments such as LRO NAC and HRSC. I also hope to present ASAP-Stereo at future workshops, and I plan to make the project citeable soon.</p><p>Thanks for reading!</p></div><div class="media author-card" itemscope itemtype=http://schema.org/Person><img class="portrait mr-3" src="https://s.gravatar.com/avatar/b4f34e60edc9cc4e40f868ba708f8ae2?s=200')" itemprop=image alt=Avatar><div class=media-body><h5 class=card-title itemprop=name><a href=/authors/admin/>Andrew M. Annex</a></h5><h6 class=card-subtitle>Ph.D. Candidate</h6><p class=card-text itemprop=description>My research interests include the applications of deep learning to planetary geology.</p><ul class=network-icon aria-hidden=true><li><a itemprop=sameAs href=mailto:annex@jhu.edu><i class="fas fa-envelope"></i></a></li><li><a itemprop=sameAs href=https://twitter.com/AndrewAnnex target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li><li><a itemprop=sameAs href="https://scholar.google.com/citations?user=TvVXLl0AAAAJ" target=_blank rel=noopener><i class="ai ai-google-scholar"></i></a></li><li><a itemprop=sameAs href=https://orcid.org/0000-0002-0253-2313 target=_blank rel=noopener><i class="ai ai-orcid"></i></a></li><li><a itemprop=sameAs href=https://github.com/AndrewAnnex target=_blank rel=noopener><i class="fab fa-github"></i></a></li><li><a itemprop=sameAs href=https://linkedin.com/in/AndrewAnnex target=_blank rel=noopener><i class="fab fa-linkedin-in"></i></a></li></ul></div></div></div></article><div class=container><footer class=site-footer><p class=powered-by>2020 &middot;
Powered by the
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic theme</a> for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.
<span class=float-right aria-hidden=true><a href=# id=back_to_top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&times;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div><script src=/js/mathjax-config.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin=anonymous async></script><script>hljs.initHighlightingOnLoad();</script><script>const search_index_filename="/index.json";const i18n={'placeholder':"Search...",'results':"results found",'no_results':"No results found"};const content_type={'post':"Posts",'project':"Projects",'publication':"Publications",'talk':"Talks"};</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/js/academic.min.3258b3a711acd6208568ec000de4beec.js></script></body></html>